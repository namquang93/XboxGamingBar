<Page
    x:Class="XboxGamingBar.GamingWidget"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:XboxGamingBar"
    xmlns:converter="using:XboxGamingBar.Converter"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="670" d:DesignWidth="464">

    <Page.Resources>
        <converter:WattStringConverter x:Key="WattStringConverter"/>
        <converter:MegahertzStringConverter x:Key="MegahertzStringConverter"/>
        <converter:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        <converter:SharpnessPercentStringConverter x:Key="SharpnessPercentStringConverter"/>
        <converter:RadeonBoostResolutionStringConverter x:Key="RadeonBoostResolutionStringConverter"/>
        <converter:RadeonChillMinFPSStringConverter x:Key="RadeonChillMinFPSStringConverter"/>
        <converter:RadeonChillMaxFPSStringConverter x:Key="RadeonChillMaxFPSStringConverter"/>
    </Page.Resources>

    <Grid x:Name="RootGrid">
        <ProgressRing x:Name="LoadingProgressRing" IsActive="True" Visibility="Collapsed" Width="100" Height="100" VerticalAlignment="Center" HorizontalAlignment="Center" Canvas.ZIndex="1"/>
        
        <Pivot x:Name="MainPivot">
            <!-- PERFORMANCE TAB -->
            <PivotItem>
                <PivotItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <FontIcon Glyph="&#xE9D2;" Margin="0,0,8,0" FontSize="16" VerticalAlignment="Center"/>
                        <TextBlock Text="Performance" FontWeight="Bold" VerticalAlignment="Center"/>
                    </StackPanel>
                </PivotItem.Header>
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                    <Grid Margin="3,10,3,15">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/> <!-- 0: Overlay Text -->
                            <RowDefinition Height="32"/>   <!-- 1: Overlay Slider -->
                            <RowDefinition Height="10"/>   <!-- 2: Spacer shortened -->
                            <RowDefinition Height="32"/>   <!-- 3: Overlay Labels -->
                            <RowDefinition Height="36"/>   <!-- 4: Running Game / Per Game Profile -->
                            <RowDefinition Height="Auto"/> <!-- 5: TDP Text -->
                            <RowDefinition Height="32"/>   <!-- 6: TDP Slider -->
                            <RowDefinition Height="36"/>   <!-- 7: CPU Boost -->
                            <RowDefinition Height="Auto"/> <!-- 8: CPU EPP Text -->
                            <RowDefinition Height="32"/>   <!-- 9: CPU EPP Slider -->
                            <RowDefinition Height="36"/>   <!-- 10: Limit CPU Clock -->
                            <RowDefinition Height="32"/>   <!-- 11: CPU Clock Slider -->
                        </Grid.RowDefinitions>

                        <TextBlock x:Name="PerformanceOverlayText" Text="Performance Overlay" FontWeight="SemiBold" FontSize="18" Grid.Row="0"/>
                        <Slider x:Name="PerformanceOverlaySlider" Grid.Row="1"
                            Minimum="0" Maximum="4"
                            TickFrequency="1"
                            SnapsTo="StepValues"
                            TickPlacement="BottomRight"
                            IsEnabled="False"/>
                        <Grid Margin="-40,-10,-40,10" Grid.Row="3">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="OFF"     Grid.Column="0" HorizontalAlignment="Center" FontSize="16"/>
                            <TextBlock Text="FPS"      Grid.Column="1" HorizontalAlignment="Center" FontSize="16"/>
                            <TextBlock Text="BATTERY"  Grid.Column="2" HorizontalAlignment="Center" FontSize="16"/>
                            <TextBlock Text="DETAILED" Grid.Column="3" HorizontalAlignment="Center" FontSize="16"/>
                            <TextBlock Text="FULL"     Grid.Column="4" HorizontalAlignment="Center" FontSize="16"/>
                        </Grid>

                        <Grid Grid.Row="4">
                            <TextBlock x:Name="RunningGameText" Text="No game detected" FontWeight="SemiBold" FontSize="18"
                                TextTrimming="CharacterEllipsis" TextWrapping="NoWrap" Width="220" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                            <ToggleSwitch x:Name="PerGameProfileToggle" IsEnabled="False" OffContent="Global" OnContent="Per-game"
                                FlowDirection="RightToLeft" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                        </Grid>

                        <Grid Grid.Row="5" Visibility="Collapsed" x:Name="TDPHeaderGrid">
                            <TextBlock x:Name="TDPLimitText" Text="Thermal Power (TDP) Limit" FontWeight="SemiBold" FontSize="18" Grid.Row="0"/>
                            <TextBlock x:Name="TDPValueText" Text="{Binding ElementName=TDPSlider, Path=Value, Converter={StaticResource WattStringConverter}}" 
                                VerticalAlignment="Center" HorizontalAlignment="Right"/>
                        </Grid>
                        <Slider x:Name="TDPSlider" Grid.Row="6"
                            Minimum="4" Maximum="32"
                            TickFrequency="1"
                            SnapsTo="Ticks"
                            TickPlacement="BottomRight"
                            IsEnabled="False"
                            Visibility="Collapsed"/>

                        <Grid Grid.Row="7">
                            <TextBlock x:Name="CPUBoostText" Text="CPU Boost" FontWeight="SemiBold" FontSize="18"
                                TextTrimming="CharacterEllipsis" TextWrapping="NoWrap" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                            <ToggleSwitch x:Name="CPUBoostToggle" IsEnabled="False" OffContent="Disabled" OnContent="Aggressive"
                                FlowDirection="RightToLeft" VerticalAlignment="Center" HorizontalAlignment="Right" />
                        </Grid>

                        <Grid Grid.Row="8">
                            <TextBlock x:Name="CPUEPPText" Text="Energy Pref (EPP)" FontWeight="SemiBold" FontSize="18"/>
                            <TextBlock x:Name="CPUEPPValueText" Text="{Binding ElementName=CPUEPPSlider, Path=Value}" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                        </Grid>
                        <Slider x:Name="CPUEPPSlider" Grid.Row="9"
                            Minimum="10" Maximum="95"
                            TickFrequency="5"
                            SnapsTo="Ticks"
                            TickPlacement="BottomRight"
                            IsEnabled="False"/>

                        <Grid Grid.Row="10">
                            <TextBlock x:Name="LimitCPUClockText" Text="Limit CPU Clock" FontWeight="SemiBold" FontSize="18"
                                TextTrimming="CharacterEllipsis" TextWrapping="NoWrap" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                            <ToggleSwitch x:Name="LimitCPUClockToggle" IsEnabled="False" OffContent="Disabled" OnContent="{Binding ElementName=CPUClockMaxSlider, Path=Value, Converter={StaticResource MegahertzStringConverter}}"
                                FlowDirection="RightToLeft" VerticalAlignment="Center" HorizontalAlignment="Right" />
                        </Grid>
                        <Slider x:Name="CPUClockMaxSlider" Grid.Row="11"
                            Minimum="300" Maximum="5100"
                            TickFrequency="100"
                            SnapsTo="Ticks"
                            TickPlacement="BottomRight"
                            IsEnabled="False"
                            Visibility="{Binding ElementName=LimitCPUClockToggle, Path=IsOn, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                    </Grid>
                </ScrollViewer>
            </PivotItem>

            <!-- SYSTEM TAB -->
            <PivotItem>
                <PivotItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <FontIcon Glyph="&#xE770;" Margin="0,0,8,0" FontSize="16" VerticalAlignment="Center"/>
                        <TextBlock Text="System" FontWeight="Bold" VerticalAlignment="Center"/>
                    </StackPanel>
                </PivotItem.Header>
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                    <Grid Margin="3,10,3,15">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="36"/> <!-- 0: Refresh Rate -->
                            <RowDefinition Height="10"/> <!-- 1: Spacer (spacer between 2 comboboxes should be slightly smaller) -->
                            <RowDefinition Height="36"/> <!-- 2: Resolution -->
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="0">
                            <TextBlock x:Name="RefreshRatesText" Text="Refresh Rate" FontWeight="SemiBold" FontSize="18"
                                TextTrimming="CharacterEllipsis" TextWrapping="NoWrap" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                            <ComboBox x:Name="RefreshRatesComboBox" PlaceholderText="60 Hz" Width="140" IsEnabled="False" HorizontalAlignment="Right">
                                <x:String>60 Hz</x:String>
                            </ComboBox>
                        </Grid>

                        <Grid Grid.Row="2">
                            <TextBlock x:Name="ResolutionsText" Text="Resolution" FontWeight="SemiBold" FontSize="18"
                                TextTrimming="CharacterEllipsis" TextWrapping="NoWrap" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                            <ComboBox x:Name="ResolutionsComboBox" PlaceholderText="1920x1080" Width="140" IsEnabled="False" HorizontalAlignment="Right">
                                <x:String>1920x1080</x:String>
                            </ComboBox>
                        </Grid>
                    </Grid>
                </ScrollViewer>
            </PivotItem>

            <!-- AMD SETTINGS TAB -->
            <PivotItem x:Name="AMDPivotItem" Visibility="Collapsed">
                <PivotItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <FontIcon Glyph="&#xE945;" Margin="0,0,8,0" FontSize="16" VerticalAlignment="Center"/>
                        <TextBlock Text="AMD" FontWeight="Bold" VerticalAlignment="Center"/>
                    </StackPanel>
                </PivotItem.Header>
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                    <Grid Margin="3,10,3,15">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="36"/>   <!-- 0: RSR -->
                            <RowDefinition Height="Auto"/>   <!-- 1: RSR Slider -->
                            <RowDefinition Height="36"/>   <!-- 2: AFMF -->
                            <RowDefinition Height="36"/>   <!-- 3: Anti-Lag -->
                            <RowDefinition Height="36"/>   <!-- 4: Boost -->
                            <RowDefinition Height="Auto"/>   <!-- 5: Boost Slider -->
                            <RowDefinition Height="36"/>   <!-- 6: Chill -->
                            <RowDefinition Height="Auto"/> <!-- 7: Chill Min Text -->
                            <RowDefinition Height="Auto"/>   <!-- 8: Chill Min Slider -->
                            <RowDefinition Height="Auto"/> <!-- 9: Chill Max Text -->
                            <RowDefinition Height="Auto"/>   <!-- 10: Chill Max Slider -->
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="0">
                            <TextBlock x:Name="AMDRadeonSuperResolutionText" Text="Radeon Super Resolution" FontWeight="SemiBold" FontSize="18"
                                TextTrimming="CharacterEllipsis" TextWrapping="NoWrap" HorizontalAlignment="Left" VerticalAlignment="Center" />
                            <ToggleSwitch x:Name="AMDRadeonSuperResolutionToggle" IsEnabled="False" OffContent="Disabled" OnContent="{Binding ElementName=AMDRadeonSuperResolutionSharpnessSlider, Path=Value, Converter={StaticResource SharpnessPercentStringConverter}}"
                                FlowDirection="RightToLeft" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                        </Grid>
                        <Slider x:Name="AMDRadeonSuperResolutionSharpnessSlider" Grid.Row="1"
                            Minimum="0" Maximum="100"
                            TickFrequency="1"
                            SnapsTo="Ticks"
                            TickPlacement="BottomRight"
                            IsEnabled="False"
                            Visibility="{Binding ElementName=AMDRadeonSuperResolutionToggle, Path=IsOn, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                        <Grid Grid.Row="2">
                            <TextBlock x:Name="AMDFluidMotionFrameText" Text="AMD Fluid Motion Frame" FontWeight="SemiBold" FontSize="18"
                                TextTrimming="CharacterEllipsis" TextWrapping="NoWrap" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                            <ToggleSwitch x:Name="AMDFluidMotionFrameToggle" IsEnabled="False" OffContent="Disabled" OnContent="Enabled"
                                FlowDirection="RightToLeft" VerticalAlignment="Center" HorizontalAlignment="Right" />
                        </Grid>

                        <Grid Grid.Row="3">
                            <TextBlock x:Name="AMDRadeonAntiLagText" Text="Radeon Anti-Lag" FontWeight="SemiBold" FontSize="18"
                                TextTrimming="CharacterEllipsis" TextWrapping="NoWrap" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                            <ToggleSwitch x:Name="AMDRadeonAntiLagToggle" IsEnabled="False" OffContent="Disabled" OnContent="Enabled"
                                FlowDirection="RightToLeft" VerticalAlignment="Center" HorizontalAlignment="Right" />
                        </Grid>

                        <Grid Grid.Row="4">
                            <TextBlock x:Name="AMDRadeonBoostText" Text="Radeon Boost" FontWeight="SemiBold" FontSize="18"
                                TextTrimming="CharacterEllipsis" TextWrapping="NoWrap" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                            <ToggleSwitch x:Name="AMDRadeonBoostToggle" IsEnabled="False" OffContent="Disabled" OnContent="{Binding ElementName=AMDRadeonBoostResolutionSlider, Path=Value, Converter={StaticResource RadeonBoostResolutionStringConverter}}"
                                FlowDirection="RightToLeft" VerticalAlignment="Center" HorizontalAlignment="Right" />
                        </Grid>
                        <Slider x:Name="AMDRadeonBoostResolutionSlider" Grid.Row="5"
                            Minimum="0" Maximum="1"
                            TickFrequency="1"
                            SnapsTo="Ticks"
                            TickPlacement="BottomRight"
                            IsEnabled="False"
                            Visibility="{Binding ElementName=AMDRadeonBoostToggle, Path=IsOn, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                        <Grid Grid.Row="6">
                            <TextBlock x:Name="AMDRadeonChillText" Text="Radeon Chill" FontWeight="SemiBold" FontSize="18"
                                TextTrimming="CharacterEllipsis" TextWrapping="NoWrap" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                            <ToggleSwitch x:Name="AMDRadeonChillToggle" IsEnabled="False" OffContent="Disabled" OnContent="Enabled"
                                FlowDirection="RightToLeft" VerticalAlignment="Center" HorizontalAlignment="Right" />
                        </Grid>
                        
                        <TextBlock x:Name="AMDRadeonChillMinFPSText" Text="{Binding ElementName=AMDRadeonChillMinFPSSlider, Path=Value, Converter={StaticResource RadeonChillMinFPSStringConverter}}" Grid.Row="7"
                            HorizontalAlignment="Left" VerticalAlignment="Center"
                            Visibility="{Binding ElementName=AMDRadeonChillToggle, Path=IsOn, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                        <Slider x:Name="AMDRadeonChillMinFPSSlider" Grid.Row="8"
                            Minimum="30" Maximum="300"
                            TickFrequency="5"
                            SnapsTo="Ticks"
                            TickPlacement="BottomRight"
                            IsEnabled="False"
                            Visibility="{Binding ElementName=AMDRadeonChillToggle, Path=IsOn, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                            
                        <TextBlock x:Name="AMDRadeonChillMaxFPSText" Text="{Binding ElementName=AMDRadeonChillMaxFPSSlider, Path=Value, Converter={StaticResource RadeonChillMaxFPSStringConverter}}" Grid.Row="9"
                            HorizontalAlignment="Left" VerticalAlignment="Center"
                            Visibility="{Binding ElementName=AMDRadeonChillToggle, Path=IsOn, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                        <Slider x:Name="AMDRadeonChillMaxFPSSlider" Grid.Row="10"
                            Minimum="30" Maximum="300"
                            TickFrequency="5"
                            SnapsTo="Ticks"
                            TickPlacement="BottomRight"
                            IsEnabled="False"
                            Visibility="{Binding ElementName=AMDRadeonChillToggle, Path=IsOn, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                    </Grid>
                </ScrollViewer>
            </PivotItem>
        </Pivot>

        <!-- Thin line below the tabs -->
        <Border BorderBrush="{ThemeResource SystemControlForegroundBaseMediumLowBrush}" 
                BorderThickness="0,0,0,1" 
                VerticalAlignment="Top" 
                Height="48" 
                IsHitTestVisible="False"/>
    </Grid>


</Page>
